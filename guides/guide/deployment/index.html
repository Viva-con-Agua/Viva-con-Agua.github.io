<!DOCTYPE html><html lang="en-US"><head><link rel="preload" as="script" href="/bootstrap.300771c4.js"/><link rel="preload" as="script" href="/templates/src/containers/Guide.b58b0cce.js"/><link rel="preload" as="script" href="/main.96dd5c3d.js"/><link rel="preload" as="style" href="/styles.1d1c69fb.css"/><link rel="stylesheet" href="/styles.1d1c69fb.css"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no"/></head><body><div id="root"><div data-reactroot=""><nav><a class="brand active" aria-current="page" href="/"><img src="data:image/png;base64,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" alt="Viva con Agua logo"/><div><span class="bold">Pool²</span><span>Documentation</span></div></a><a class="text" href="/concepts">Concepts</a><a class="text active" aria-current="page" href="/guides">Guides</a><a class="text" href="/rest">REST Interfaces</a><a class="text" href="/about">About</a><span>This documentation is still under construction...</span></nav><div class="content"><div><a class="active" aria-current="page" href="/guides/">&lt;<!-- --> Back</a><br/><h3>Deploy Pool² for Development</h3><h1 id="deploy-pool-for-development">Deploy Pool² for Development</h1>
<h2 id="install-docker">Install Docker</h2>
<p>The Pool² implements its microservice architecture using <a href="https://www.docker.com/">docker</a> that can easily setup on the 
most operating systems. Guides can be found at the <a href="https://docs.docker.com/install/">docker documentation</a>. You need to 
install the <code>docker-ce</code> package. Don&#x27;t worry about stage and edge version, it works fine with both. The staging server 
uses <a href="https://www.debian.org/index.de.html">debian</a> as operating system. If you want to deploy the Pool² as development 
system it makes sense to setup a virtual machine (VM) via <a href="https://www.virtualbox.org/">VirtualBox</a> or 
<a href="https://www.vmware.com/de.html">vmware</a>. There are a lot of guides online, that can help you to setup a VM.<br/>
<strong><em>Notice:</em></strong> The scripts you need to setup the Pool² development system are written for <code>bash</code> on a linux system.</p>
<p>After setting up the VM and docker-ce, you can start the docker service using <code>sudo systemctl start docker.service</code>. Next 
your system user need access to docker.service. </p>
<p>For Ubuntu:</p>
<pre><code class="lang-bash">    sudo groupadd docker
    sudo useradd username
    sudo usermod -aG docker username 
</code></pre>
<p>(Replace <code>username</code>)</p>
<h2 id="using-the-pool-scripts">Using the Pool² scripts</h2>
<p>For deployment of the Pool², you can use the <a href="https://github.com/Viva-con-Agua/pool2-deployment-scripts">pool2-deployment-scripts</a>. 
These scripts are hosted on <a href="https://github.com/">GitHub</a>. If you want to deploy for development, you need the <code>develop</code> 
branch.<br/>
<strong><em>Notice:</em></strong> The scripts create a folder in the parent directory of your execution path. If your user is not assigned to
the docker-group and you start the script with <code>sudo</code>, the new folder is only accessible by root. On staging, we have 
created a folder, named <code>Pool</code> and copied the repository into it. </p>
<p>For Ubuntu:</p>
<pre><code class="lang-bash">    mkdir ~/directory-name
    cd ~/directory-name
    git clone -b develop https://github.com/Viva-con-Agua/pool2-deployment-scripts.git
</code></pre>
<p>Now, <code>directory-name</code> contains the <code>pool2-deployment-scripts</code> directory containing all important setup scripts. Especially, 
there you can find the <code>pool.sh</code> which works as control script. </p>
<p>Controlling the application requires three commands:</p>
<ol>
<li>You can start the pool in dev mode with <code>./pool.sh dev setup</code></li>
<li>You can delete the pool with <code>./pool.sh clean setup</code></li>
<li>You can completely delete the pool with <code>./pool.sh cleanfull setup</code></li>
</ol>
<p><strong><em>Notice:</em></strong> The docker service needs root access except the user is not in the docker-group<br/>
<strong><em>Attention!</em></strong> On <code>cleanfull setup</code> also the database docker container and the Pool² sub-network (<code>pool-network</code>) will
be deleted. All your data will be lost. </p>
<p>After startup, the Pool² should be available at <code>http://localhost</code>.</p>
<p>The scripts also initiate a Pool² sub-network, called <code>pool-network</code>. Every started docker can be assigned to an IP address
in range of this network. You can find all IPs with <code>docker network inspect pool-network</code>.</p>
<h2 id="read-the-logs">Read the Logs</h2>
<p>In some cases, you need to read the logs. For this purpose, you can use the given scripts: <code>./pool.sh logs microservice_name</code>. So, if everything works, you have to register your first user on <em>Drops</em>. Activation of your account requires to use a link that has sent you by email. On a development system, a mockup email server is used, writing the email to the logs of <em>Drops</em>. Thus you can call the link from the logs by <code>./pool.sh logs drops</code>.</p>
<h2 id="setup-your-own-microservice">Setup your own Microservice</h2>
<p>Next to the microservices implementing functional requirements, there is also a number of microservices and docker 
container running, implementing non-functional requirements:</p>
<ul>
<li><a href="https://www.nginx.com/">Nginx</a> docker serving as a Reverse-Proxy to redirect incoming requests into the <code>pool-network</code></li>
<li><a href="https://nats.io/">nats</a> docker hosts a message broker, that is used by the microservices for event-based communication</li>
<li><strong>Dispenser</strong> docker that handles templates, as described by the <a href="concepts/ui/fragment/composition">UI-Fragment-Composition concept</a></li>
</ul>
<p>The <a href="https://www.nginx.com/">Nginx</a> docker is also listening at <code>localhost:8080</code>. Thus, you can deploy your microservice 
at port <code>8080</code> and all docker container in range of <code>pool-network</code> will have access to it. Furthermore, the content 
generated by your microservice will be accessible at <code>http://localhost/sozmed</code>.</p>
<p>Your microservice needs to handle the base path. There are several implementations and the configuration depends on your 
technology. If you are using <a href="https://webpack.js.org/">webpack</a>, you can simple edit the <code>config/index.js</code> file and change <code>assetsPublicPath: &#x27;/&#x27;</code> to <code>assetsPublicPath: &#x27;/sozmed/&#x27;</code> to set the base path to <code>sozmed</code>.</p>
<h2 id="setup-more-docker">Setup more docker</h2>
<p>In case you need a database or any additional stuff, it can be easily deployed as a docker container in our <code>pool-network</code>. 
Simply add the <code>--net</code> parameter appended to the <code>run</code> command. For example, if you want to deploy <a href="https://mariadb.org/">mariadb</a>: </p>
<pre><code class="lang-bash">    docker run --name ms-mariadb --net pool-network -d maria
</code></pre>
<p>This will setup a <a href="https://mariadb.org/">mariadb</a> with a <code>pool-network</code> IP. The subnet is defined in range of the IP-Space 
172.2.0.0/16. The <code>-d</code> parameter starts the docker as daemon in the background. You can read the logs using 
<code>docker logs ms-mariadb</code> and also can get <code>bash</code> access using <code>docker exec -it ms-mariadb bash</code>. 
Otherwise, it is also possible to setup your docker with a static IP or forward ports to the localhost. For example:</p>
<pre><code class="lang-bash">    docker run --net pool-network --ip 172.2.30.1 -p 4000:3306 -d maria

</code></pre>
<p>The database can now be accessed on the IP <code>172.2.30.1:3306</code> or on <code>localhost:4000</code>. The <code>-p</code> parameter links the 
localhosts port 4000 to the docker containers port 3306.</p>
<p><strong>Author:</strong> <a href="https://cses.informatik.hu-berlin.de/members/dennis.kleber/">Dennis Kleber</a>, <a href="https://cses.informatik.hu-berlin.de/members/johann.sell/">Johann Sell</a> -- 
<strong>Created:</strong> 2018-06-05 --
<strong>Updated:</strong> 2018-06-11</p></div></div></div></div><script type="text/javascript">window.__CSS_CHUNKS__ = {"main":"/styles.1d1c69fb.css"}</script><script type="text/javascript">
    window.__routeInfo = {"path":"guides/guide/deployment","templateID":6,"sharedPropsHashes":{},"localProps":null,"allProps":{"guide":{"title":"Deploy Pool² for Development","slug":"guide/deployment","contents":"<h1 id=\"deploy-pool-for-development\">Deploy Pool² for Development</h1>\n<h2 id=\"install-docker\">Install Docker</h2>\n<p>The Pool² implements its microservice architecture using <a href=\"https://www.docker.com/\">docker</a> that can easily setup on the \nmost operating systems. Guides can be found at the <a href=\"https://docs.docker.com/install/\">docker documentation</a>. You need to \ninstall the <code>docker-ce</code> package. Don&#39;t worry about stage and edge version, it works fine with both. The staging server \nuses <a href=\"https://www.debian.org/index.de.html\">debian</a> as operating system. If you want to deploy the Pool² as development \nsystem it makes sense to setup a virtual machine (VM) via <a href=\"https://www.virtualbox.org/\">VirtualBox</a> or \n<a href=\"https://www.vmware.com/de.html\">vmware</a>. There are a lot of guides online, that can help you to setup a VM.<br />\n<strong><em>Notice:</em></strong> The scripts you need to setup the Pool² development system are written for <code>bash</code> on a linux system.</p>\n<p>After setting up the VM and docker-ce, you can start the docker service using <code>sudo systemctl start docker.service</code>. Next \nyour system user need access to docker.service. </p>\n<p>For Ubuntu:</p>\n<pre><code class=\"lang-bash\">    sudo groupadd docker\n    sudo useradd username\n    sudo usermod -aG docker username \n</code></pre>\n<p>(Replace <code>username</code>)</p>\n<h2 id=\"using-the-pool-scripts\">Using the Pool² scripts</h2>\n<p>For deployment of the Pool², you can use the <a href=\"https://github.com/Viva-con-Agua/pool2-deployment-scripts\">pool2-deployment-scripts</a>. \nThese scripts are hosted on <a href=\"https://github.com/\">GitHub</a>. If you want to deploy for development, you need the <code>develop</code> \nbranch.<br />\n<strong><em>Notice:</em></strong> The scripts create a folder in the parent directory of your execution path. If your user is not assigned to\nthe docker-group and you start the script with <code>sudo</code>, the new folder is only accessible by root. On staging, we have \ncreated a folder, named <code>Pool</code> and copied the repository into it. </p>\n<p>For Ubuntu:</p>\n<pre><code class=\"lang-bash\">    mkdir ~/directory-name\n    cd ~/directory-name\n    git clone -b develop https://github.com/Viva-con-Agua/pool2-deployment-scripts.git\n</code></pre>\n<p>Now, <code>directory-name</code> contains the <code>pool2-deployment-scripts</code> directory containing all important setup scripts. Especially, \nthere you can find the <code>pool.sh</code> which works as control script. </p>\n<p>Controlling the application requires three commands:</p>\n<ol>\n<li>You can start the pool in dev mode with <code>./pool.sh dev setup</code></li>\n<li>You can delete the pool with <code>./pool.sh clean setup</code></li>\n<li>You can completely delete the pool with <code>./pool.sh cleanfull setup</code></li>\n</ol>\n<p><strong><em>Notice:</em></strong> The docker service needs root access except the user is not in the docker-group<br />\n<strong><em>Attention!</em></strong> On <code>cleanfull setup</code> also the database docker container and the Pool² sub-network (<code>pool-network</code>) will\nbe deleted. All your data will be lost. </p>\n<p>After startup, the Pool² should be available at <code>http://localhost</code>.</p>\n<p>The scripts also initiate a Pool² sub-network, called <code>pool-network</code>. Every started docker can be assigned to an IP address\nin range of this network. You can find all IPs with <code>docker network inspect pool-network</code>.</p>\n<h2 id=\"read-the-logs\">Read the Logs</h2>\n<p>In some cases, you need to read the logs. For this purpose, you can use the given scripts: <code>./pool.sh logs microservice_name</code>. So, if everything works, you have to register your first user on <em>Drops</em>. Activation of your account requires to use a link that has sent you by email. On a development system, a mockup email server is used, writing the email to the logs of <em>Drops</em>. Thus you can call the link from the logs by <code>./pool.sh logs drops</code>.</p>\n<h2 id=\"setup-your-own-microservice\">Setup your own Microservice</h2>\n<p>Next to the microservices implementing functional requirements, there is also a number of microservices and docker \ncontainer running, implementing non-functional requirements:</p>\n<ul>\n<li><a href=\"https://www.nginx.com/\">Nginx</a> docker serving as a Reverse-Proxy to redirect incoming requests into the <code>pool-network</code></li>\n<li><a href=\"https://nats.io/\">nats</a> docker hosts a message broker, that is used by the microservices for event-based communication</li>\n<li><strong>Dispenser</strong> docker that handles templates, as described by the <a href=\"concepts/ui/fragment/composition\">UI-Fragment-Composition concept</a></li>\n</ul>\n<p>The <a href=\"https://www.nginx.com/\">Nginx</a> docker is also listening at <code>localhost:8080</code>. Thus, you can deploy your microservice \nat port <code>8080</code> and all docker container in range of <code>pool-network</code> will have access to it. Furthermore, the content \ngenerated by your microservice will be accessible at <code>http://localhost/sozmed</code>.</p>\n<p>Your microservice needs to handle the base path. There are several implementations and the configuration depends on your \ntechnology. If you are using <a href=\"https://webpack.js.org/\">webpack</a>, you can simple edit the <code>config/index.js</code> file and change <code>assetsPublicPath: &#39;/&#39;</code> to <code>assetsPublicPath: &#39;/sozmed/&#39;</code> to set the base path to <code>sozmed</code>.</p>\n<h2 id=\"setup-more-docker\">Setup more docker</h2>\n<p>In case you need a database or any additional stuff, it can be easily deployed as a docker container in our <code>pool-network</code>. \nSimply add the <code>--net</code> parameter appended to the <code>run</code> command. For example, if you want to deploy <a href=\"https://mariadb.org/\">mariadb</a>: </p>\n<pre><code class=\"lang-bash\">    docker run --name ms-mariadb --net pool-network -d maria\n</code></pre>\n<p>This will setup a <a href=\"https://mariadb.org/\">mariadb</a> with a <code>pool-network</code> IP. The subnet is defined in range of the IP-Space \n172.2.0.0/16. The <code>-d</code> parameter starts the docker as daemon in the background. You can read the logs using \n<code>docker logs ms-mariadb</code> and also can get <code>bash</code> access using <code>docker exec -it ms-mariadb bash</code>. \nOtherwise, it is also possible to setup your docker with a static IP or forward ports to the localhost. For example:</p>\n<pre><code class=\"lang-bash\">    docker run --net pool-network --ip 172.2.30.1 -p 4000:3306 -d maria\n\n</code></pre>\n<p>The database can now be accessed on the IP <code>172.2.30.1:3306</code> or on <code>localhost:4000</code>. The <code>-p</code> parameter links the \nlocalhosts port 4000 to the docker containers port 3306.</p>\n<p><strong>Author:</strong> <a href=\"https://cses.informatik.hu-berlin.de/members/dennis.kleber/\">Dennis Kleber</a>, <a href=\"https://cses.informatik.hu-berlin.de/members/johann.sell/\">Johann Sell</a> -- \n<strong>Created:</strong> 2018-06-05 --\n<strong>Updated:</strong> 2018-06-11</p>\n"}},"siteData":{"title":"Pool² Documentation"}};</script><script defer="" type="text/javascript" src="/bootstrap.300771c4.js"></script><script defer="" type="text/javascript" src="/templates/src/containers/Guide.b58b0cce.js"></script><script defer="" type="text/javascript" src="/main.96dd5c3d.js"></script></body></html>